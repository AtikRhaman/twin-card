function checkMedia(){var t="none";return t=window.matchMedia("(min-width: 768px)").matches?window.matchMedia("(min-width: 992px)").matches?window.matchMedia("(min-width: 1200px)").matches?"lg":"md":"sm":"xs"}function workItemWidth(t,i){var n="2";return n="xs"===t?i.ws_xs:"sm"===t?i.ws_sm:"md"===t?i.ws_md:i.ws_lg}$(function(){$.fn.jportilio=function(t){function i(t){if(!(null!=s.filter&&s.filter.length>0))return!0;var i=t.data("tags");if(null!=i&&i.length>0){var n=!1;if(i=i.split(","),i.map(function(t){return-1!=$.inArray(t,s.filter)?(n=!0,!0):void 0}),n===!0)return!0}return!1}function n(t){var n=checkMedia(),e=workItemWidth(n,s),o=t.width()/e,a=s.ratio*parseFloat(o)-2*s.item_margin,r=0,c=0,l=0,h=0;t.children(".jprt-item").each(function(){var n=$(this);if("cover"===n.data("content-show")&&n.find(".jprt-content").css({height:a+"px"}),"new_section"===n.data("content-show")){var d=n.find(".jprt-content");d.css({position:"absolute",visibility:"hidden",display:"block",width:t.width()+"px"}),d.css({position:"",visibility:"",display:""})}if(i(n)){if(n.css({display:"block",height:a+"px",width:o-2*s.item_margin+"px",top:c*(a+parseFloat(2*s.item_margin))+h+"px",left:r*o+"px","margin-top":s.item_margin+"px","margin-left":s.item_margin+"px"}),n.find(".jprt-caption").css({height:a+"px"}),n.find(".jprt-hover").css({height:a+"px"}),n.find(".jprt-content").hasClass("show_new_section")){var w=n.find(".jprt-content"),p=w.outerHeight();w.css({"margin-top":a+"px",width:t.width()-2*s.item_margin+"px","margin-left":-(r*o)+"px"}),l=p,n.find(".jprt-arrow-down-border").css({display:"block"})}else n.find(".jprt-arrow-down-border").css({display:"none"});r++}else n.css({height:"0px",width:"0px"}),n.css({display:"none"});r>=e&&(r=0,c++,h+=l,l=0)}),r>0&&e>r&&(h+=l),t.css({height:(c+1)*(a+2*s.item_margin)+h+"px"})}var e,s=$.extend({},$.fn.jportilio.defaults,t),o=this;return $(window).on("resize",function(){clearTimeout(e),e=setTimeout(function(){o.each(function(){n($(this),"")})},100)}),this.each(function(){var t=$(this);n(t),$("button[data-jprtgrid="+t.attr("id")+"]").on("click",function(){var i=$(this).data("tag");null!=i&&(i=i.split(",")),$(this).hasClass("jprt-btn-active")?($(this).removeClass("jprt-btn-active"),null!=i&&s.filter.length>0&&i.map(function(t){s.filter.splice($.inArray(t,s.filter),1)})):($(this).addClass("jprt-btn-active"),0==s.filter.length?null!=i&&i.length>0&&(s.filter=i):null!=i&&i.length>0&&i.map(function(t){s.filter.push(t)})),n(t)}),$('div[data-content-show="redirect"]').on("click",function(){var t=$(this).data("content-show");if(null!=t&&"redirect"===t){var i=$(this).data("content-url");null!=i&&(window.location.href=i)}}),$('button[data-content-show="redirect"]').on("click",function(){var t=$(this).data("content-show");if(null!=t&&"redirect"===t){var i=$(this).data("content-url");null!=i&&(window.location.href=i)}}),$('div[data-content-show="cover"][class*="jprt-item"]').on("click",function(){var t=$(this).find(".jprt-content");t.toggleClass("show")}),$('div[data-content-show="new_section"]').on("click",function(){var i=$(".show_new_section");i.each(function(){$(this).removeClass("show_new_section")});var e=$(this).find(".jprt-content");e.hasClass("new_section_shown")?e.removeClass("new_section_shown"):(e.addClass("show_new_section"),e.addClass("new_section_shown")),n(t)})})},$.fn.jportilio.defaults={filter:[],ratio:"0.75",ws_xs:1,ws_sm:2,ws_md:3,ws_lg:4,item_margin:0}});